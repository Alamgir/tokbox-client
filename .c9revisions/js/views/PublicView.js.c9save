{"ts":1365532815205,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/**\n * Created by JetBrains WebStorm.\n * User: pufferman\n * Date: 6/12/12\n * Time: 8:14 PM\n * To change this template use File | Settings | File Templates.\n */\nvar PublicView = Backbone.View.extend({\n\n    events : {\n        \"click #start\":    \"start_auth\"\n    },\n\n    initialize: function() {\n        _.bindAll(this, 'render', \"start_auth\", \"resume_auth\");\n\n        var source   = $(\"#publicView-template\").html();\n        var template = Handlebars.compile(source);\n        $(this.el).html(template);\n        $('#app').append(this.el);\n    },\n\n    render: function() {\n        $('#app').html($(this.el));\n        this.delegateEvents();\n        return this;\n    },\n\n    start_auth: function() {\n        $.ajax({\n            type: 'GET',\n            url: 'http://localhost:8080/users/req_auth',\n            dataType: 'json',\n            statusCode: {\n                500 : function(jqXHR, textStatus, errorThrown) {\n                    alert(\"Error getting request token\");\n                },\n                200 : function(data) {\n                    App.request_token = data;\n                    $.jStorage.set(\"request_token\", data);\n                    //redirect to dropbox with request_token in URL\n                    window.location = \"https://www.dropbox.com/1/oauth/authorize?oauth_token=\"+data.token+\"&oauth_callback=http://localhost:83/auth\";\n                }\n            }\n        })\n    },\n\n    resume_auth: function() {\n        //do whatever in the UI to show that auth is being completed\n        var request_token = $.jStorage.get(\"request_token\");\n        var request_token_data = {request_token: request_token.token, request_secret: request_token.secret};\n        var json_data = JSON.stringify(request_token_data);\n        $.ajax({\n            type: 'POST',\n            url: 'http://localhost:8080/users/auth',\n            data: json_data,\n            dataType: 'json',\n            statusCode: {\n                400 : function(jqXHR, textStatus, errorThrown) {\n                    alert(\"Error getting access token\");\n                },\n                200 : function(data) {\n                    App.user = data.user;\n                    App.access_token = data.access_token;\n                    App.file_data = data.entity;\n                    $.jStorage.set(\"access_token\", data.access_token);\n                    //redirect to account view with the data\n                }\n            }\n        })\n    },\n\n    login: function() {\n        //we have the access token\n        var access_token = $.jStorage.get(\"access_token\");\n        var access_token_data = {\n            access_token: access_token.token,\n            access_secret: access_token.secret,\n            access_rawResponse: access_token.rawResponse\n        };\n        var json_data = JSON.stringify(access_token_data);\n        $.ajax({\n            type: 'POST',\n            url: 'http://localhost:8080/users/login',\n            data: json_data,\n            dataType: 'json',\n            statusCode: {\n                400 : function(jqXHR, textStatus, errorThrown) {\n                    alert(\"Error getting access token\");\n                },\n                200 : function(data) {\n                    App.user = data.user_data;\n                    App.access_token = data.access_token;\n                    App.file_data = data.root_data;\n                    App.router.navigate(\"home\", true);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                var error = {\n                    error: \"true\",\n                    title: \"Error Accessing Network\",\n                    message: \"Whoops, something went wrong. Don't worry we're on it!\"\n                };\n                //Alert(error);\n                Tokbox.alert(error);\n                //alert_html = App.template.alert(error);\n                //$('#app').html(alert_html);\n            }\n        })\n    }\n\n});"]],"start1":0,"start2":0,"length1":0,"length2":3900}]],"length":3900}
{"contributors":[],"silentsave":true,"ts":1365548316746,"patch":[[{"diffs":[[0,"t_auth\"\n"],[1,"        \n"],[0,"    },\n\n"]],"start1":248,"start2":248,"length1":16,"length2":25}]],"length":3909,"saved":false}
{"ts":1365548318264,"patch":[[{"diffs":[[0,"        "],[1,"\"click \""],[0,"\n    },\n"]],"start1":256,"start2":256,"length1":16,"length2":24}]],"length":3917,"saved":false}
{"ts":1365548320956,"patch":[[{"diffs":[[0,"    "],[-1,"\"click \""],[0,"\n   "]],"start1":260,"start2":260,"length1":16,"length2":8}]],"length":3909,"saved":false}
{"ts":1365548322763,"patch":[[{"diffs":[[0,"th\"\n"],[-1,"        \n"],[0,"    "]],"start1":252,"start2":252,"length1":17,"length2":8}]],"length":3900,"saved":false}
{"ts":1365548325616,"patch":[[{"diffs":[[0,"\"click #"],[-1,"start"],[1,"login"],[0,"\":    \"s"]],"start1":224,"start2":224,"length1":21,"length2":21}]],"length":3900,"saved":false}
{"ts":1365548327682,"patch":[[{"diffs":[[0,"n\":    \""],[-1,"start_auth"],[1,"login"],[0,"\"\n    },"]],"start1":236,"start2":236,"length1":26,"length2":21}]],"length":3895,"saved":false}
{"ts":1365548331986,"patch":[[{"diffs":[[0,"nder', \""],[-1,"start_auth"],[1,"login"],[0,"\", \"resu"]],"start1":315,"start2":315,"length1":26,"length2":21}]],"length":3890,"saved":false}
{"ts":1365548333513,"patch":[[{"diffs":[[0,"ogin\", \""],[-1,"resume_auth"],[0,"\");\n\n   "]],"start1":324,"start2":324,"length1":27,"length2":16}]],"length":3879,"saved":false}
{"ts":1365548334997,"patch":[[{"diffs":[[0,"gin\""],[-1,", \"\""],[0,");\n\n"]],"start1":325,"start2":325,"length1":12,"length2":8}]],"length":3875,"saved":false}
{"ts":1365548375431,"patch":[[{"diffs":[[0,"p')."],[-1,"append"],[1,"html"],[0,"(thi"]],"start1":490,"start2":490,"length1":14,"length2":12}]],"length":3873,"saved":false}
{"ts":1365548400779,"patch":[[{"diffs":[[0,"    "],[-1,"var access_token = $.jStorage.get(\"access_token\");\n        var access_token_data = {\n            access_token: access_token.token,\n            access_secret: access_token.secret,\n            access_rawResponse: access_token.rawResponse\n        };"],[0,"\n   "]],"start1":2462,"start2":2462,"length1":254,"length2":8}]],"length":3627,"saved":false}
{"ts":1365548403489,"patch":[[{"diffs":[[0,"        var "],[-1,"jso"],[1,"logi"],[0,"n_dat"],[-1,"a"],[0," = JSON.stri"]],"start1":2467,"start2":2467,"length1":33,"length2":33}]],"length":3627,"saved":false}
{"ts":1365548404598,"patch":[[{"diffs":[[0,"ogin_dat"],[1,"a"],[0," = JSON."]],"start1":2480,"start2":2480,"length1":16,"length2":17}]],"length":3628,"saved":false}
{"ts":1365548408328,"patch":[[{"diffs":[[0,"        "],[1,"var use"],[0,"\n       "]],"start1":2458,"start2":2458,"length1":16,"length2":23}]],"length":3635,"saved":false}
{"ts":1365548410267,"patch":[[{"diffs":[[0," var use"],[1,"rname = "],[0,"\n       "]],"start1":2465,"start2":2465,"length1":16,"length2":24}]],"length":3643,"saved":false}
{"ts":1365548412510,"patch":[[{"diffs":[[0,"rname = "],[1,"$('')"],[0,"\n       "]],"start1":2473,"start2":2473,"length1":16,"length2":21}]],"length":3648,"saved":false}
{"ts":1365548414977,"patch":[[{"diffs":[[0,"me = $('"],[1,"#username_val"],[0,"')\n     "]],"start1":2476,"start2":2476,"length1":16,"length2":29}]],"length":3661,"saved":false}
{"ts":1365548418044,"patch":[[{"diffs":[[0,"me_val')"],[1,".val()"],[0,"\n       "]],"start1":2491,"start2":2491,"length1":16,"length2":22}]],"length":3667,"saved":false}
{"ts":1365548419105,"patch":[[{"diffs":[[0,"').val()"],[1,";\n        "],[0,"\n       "]],"start1":2497,"start2":2497,"length1":16,"length2":26}]],"length":3677,"saved":false}
{"ts":1365548421028,"patch":[[{"diffs":[[0,"        "],[1,"var p"],[0,"\n       "]],"start1":2507,"start2":2507,"length1":16,"length2":21}]],"length":3682,"saved":false}
{"ts":1365548424680,"patch":[[{"diffs":[[0,"   var p"],[1,"assword = $('')"],[0,"\n       "]],"start1":2512,"start2":2512,"length1":16,"length2":31}]],"length":3697,"saved":false}
{"ts":1365548426380,"patch":[[{"diffs":[[0,"rd = $('"],[1,"#pass"],[0,"')\n     "]],"start1":2525,"start2":2525,"length1":16,"length2":21}]],"length":3702,"saved":false}
{"ts":1365548429673,"patch":[[{"diffs":[[0,"$('#pass"],[1,"word_a"],[0,"')\n     "]],"start1":2530,"start2":2530,"length1":16,"length2":22}]],"length":3708,"saved":false}
{"ts":1365548431216,"patch":[[{"diffs":[[0,"assword_"],[-1,"a"],[1,"val"],[0,"')\n     "]],"start1":2535,"start2":2535,"length1":17,"length2":19}]],"length":3710,"saved":false}
{"ts":1365548433623,"patch":[[{"diffs":[[0,"rd_val')"],[1,".val"],[0,"\n       "]],"start1":2540,"start2":2540,"length1":16,"length2":20}]],"length":3714,"saved":false}
{"ts":1365548435525,"patch":[[{"diffs":[[0,"al').val"],[1,"();\n        \n        "],[0,"\n       "]],"start1":2544,"start2":2544,"length1":16,"length2":37}]],"length":3735,"saved":false}
{"ts":1365548438711,"patch":[[{"diffs":[[0,"();\n"],[-1,"        \n        \n"],[0,"    "]],"start1":2552,"start2":2552,"length1":26,"length2":8}]],"length":3717,"saved":false}
{"ts":1365548441337,"patch":[[{"diffs":[[0,"ss_token_data);\n"],[1,"        \n"],[0,"        $.ajax({"]],"start1":2600,"start2":2600,"length1":32,"length2":41}]],"length":3726,"saved":false}
{"ts":1365548443162,"patch":[[{"diffs":[[0,"ify("],[-1,"access_token_data"],[0,");\n "]],"start1":2592,"start2":2592,"length1":25,"length2":8}]],"length":3709,"saved":false}
{"ts":1365548444746,"patch":[[{"diffs":[[0,"rd_val').val();\n"],[1,"        \n"],[0,"        var logi"]],"start1":2540,"start2":2540,"length1":32,"length2":41}]],"length":3718,"saved":false}
{"ts":1365548447074,"patch":[[{"diffs":[[0,".val();\n        "],[1,"if ()"],[0,"\n        var log"]],"start1":2548,"start2":2548,"length1":32,"length2":37}]],"length":3723,"saved":false}
{"ts":1365548452946,"patch":[[{"diffs":[[0,"    if ("],[1,"username != null || "],[0,")\n      "]],"start1":2560,"start2":2560,"length1":16,"length2":36}]],"length":3743,"saved":false}
{"ts":1365548455081,"patch":[[{"diffs":[[0,"null"],[-1," ||"],[0," )\n "]],"start1":2580,"start2":2580,"length1":11,"length2":8}]],"length":3740,"saved":false}
{"ts":1365548461194,"patch":[[{"diffs":[[0,"!= null "],[1,"&&"],[0,")\n      "]],"start1":2577,"start2":2577,"length1":16,"length2":18}]],"length":3742,"saved":false}
{"ts":1365548464302,"patch":[[{"diffs":[[0," null &&"],[1," password"],[0,")\n      "]],"start1":2579,"start2":2579,"length1":16,"length2":25}]],"length":3751,"saved":false}
{"ts":1365548467367,"patch":[[{"diffs":[[0,"password"],[1," != null"],[0,")\n      "]],"start1":2588,"start2":2588,"length1":16,"length2":24}]],"length":3759,"saved":false}
{"ts":1365548470260,"patch":[[{"diffs":[[0,"!= null)"],[1," {"],[0,"\n       "]],"start1":2597,"start2":2597,"length1":16,"length2":18}]],"length":3761,"saved":false}
{"ts":1365548471338,"patch":[[{"diffs":[[0," != null) {\n"],[1,"            \n        }\n"],[0,"        var "]],"start1":2596,"start2":2596,"length1":24,"length2":47}]],"length":3784,"saved":false}
{"ts":1365548475991,"patch":[[{"diffs":[[0,"ringify("],[1,"{}"],[0,");\n     "]],"start1":2663,"start2":2663,"length1":16,"length2":18}]],"length":3786,"saved":false}
{"ts":1365548478590,"patch":[[{"diffs":[[0,"ingify({"],[1,"username:u"],[0,"});\n    "]],"start1":2664,"start2":2664,"length1":16,"length2":26}]],"length":3796,"saved":false}
{"ts":1365548481896,"patch":[[{"diffs":[[0,"ername:u"],[1,"sername,"],[0,"});\n    "]],"start1":2674,"start2":2674,"length1":16,"length2":24}]],"length":3804,"saved":false}
{"ts":1365548487819,"patch":[[{"diffs":[[0,"name != "],[-1,"null"],[1,"undefined"],[0," && pass"]],"start1":2572,"start2":2572,"length1":20,"length2":25}]],"length":3809,"saved":false}
{"ts":1365548490700,"patch":[[{"diffs":[[0," != "],[-1,"null"],[1,"undefined"],[0,") {\n"]],"start1":2601,"start2":2601,"length1":12,"length2":17}]],"length":3814,"saved":false}
{"ts":1365548496477,"patch":[[{"diffs":[[0,"sername,"],[1,"password:password"],[0,"});\n    "]],"start1":2692,"start2":2692,"length1":16,"length2":33}]],"length":3831,"saved":false}
{"ts":1365548506409,"patch":[[{"diffs":[[0,"    "],[-1,"var login_data = JSON.stringify({username:username,password:password});\n        \n        $.ajax({\n            type: 'POST',\n            url: 'http://localhost:8080/users/login',\n            data: json_data,\n            dataType: 'json',\n            statusCode: {\n                400 : function(jqXHR, textStatus, errorThrown) {\n                    alert(\"Error getting access token\");\n                },\n                200 : function(data) {\n                    App.user = data.user_data;\n                    App.access_token = data.access_token;\n                    App.file_data = data.root_data;\n                    App.router.navigate(\"home\", true);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                var error = {\n                    error: \"true\",\n                    title: \"Error Accessing Network\",\n                    message: \"Whoops, something went wrong. Don't worry we're on it!\"\n                };\n                //Alert(error);\n                Tokbox.alert(error);\n                //alert_html = App.template.alert(error);\n                //$('#app').html(alert_html);\n            }\n        })"],[0,"\n   "]],"start1":2645,"start2":2645,"length1":1179,"length2":8}]],"length":2660,"saved":false}
{"ts":1365548510224,"patch":[[{"diffs":[[0,"            "],[1,"var login_data = JSON.stringify({username:username,password:password});\n        \n        $.ajax({\n            type: 'POST',\n            url: 'http://localhost:8080/users/login',\n            data: json_data,\n            dataType: 'json',\n            statusCode: {\n                400 : function(jqXHR, textStatus, errorThrown) {\n                    alert(\"Error getting access token\");\n                },\n                200 : function(data) {\n                    App.user = data.user_data;\n                    App.access_token = data.access_token;\n                    App.file_data = data.root_data;\n                    App.router.navigate(\"home\", true);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                var error = {\n                    error: \"true\",\n                    title: \"Error Accessing Network\",\n                    message: \"Whoops, something went wrong. Don't worry we're on it!\"\n                };\n                //Alert(error);\n                Tokbox.alert(error);\n                //alert_html = App.template.alert(error);\n                //$('#app').html(alert_html);\n            }\n        })"],[0,"\n        }\n "]],"start1":2618,"start2":2618,"length1":24,"length2":1195}]],"length":3831,"saved":false}
{"ts":1365548516219,"patch":[[{"diffs":[[0,"       \n        "],[1,"    "],[0,"$.ajax({\n       "]],"start1":2703,"start2":2703,"length1":32,"length2":36},{"diffs":[[0,"       $.ajax({\n"],[1,"    "],[0,"            type"]],"start1":2716,"start2":2716,"length1":32,"length2":36},{"diffs":[[0,"  type: 'POST',\n"],[1,"    "],[0,"            url:"]],"start1":2746,"start2":2746,"length1":32,"length2":36},{"diffs":[[0,"n',\n            "],[1,"  "],[1,"  "],[0,"data: json_data,"]],"start1":2816,"start2":2816,"length1":32,"length2":36},{"diffs":[[0,"ata: json_data,\n"],[1,"    "],[0,"            data"]],"start1":2837,"start2":2837,"length1":32,"length2":36},{"diffs":[[0,"n',\n            "],[1," "],[1,"   "],[0,"statusCode: {\n  "]],"start1":2883,"start2":2883,"length1":32,"length2":36},{"diffs":[[0,"  statusCode: {\n"],[1,"    "],[0,"                "]],"start1":2901,"start2":2901,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"alert(\"Error get"]],"start1":2990,"start2":2990,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"   "],[1," "],[0,"},\n"],[1,"    "],[0,"                "]],"start1":3047,"start2":3047,"length1":35,"length2":43},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"App.user = data."]],"start1":3117,"start2":3117,"length1":32,"length2":36},{"diffs":[[0,".user_data;\n"],[1,"    "],[0,"            "]],"start1":3152,"start2":3152,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"    "],[0,"App.file_data = "]],"start1":3230,"start2":3230,"length1":32,"length2":36},{"diffs":[[0,".root_data;\n"],[1,"    "],[0,"            "]],"start1":3270,"start2":3270,"length1":24,"length2":28},{"diffs":[[0,"                "],[-1,"}\n"],[1,"    }\n    "],[0,"            },\n "]],"start1":3341,"start2":3341,"length1":34,"length2":42},{"diffs":[[0,"             },\n"],[1,"    "],[0,"            erro"]],"start1":3366,"start2":3366,"length1":32,"length2":36},{"diffs":[[0,"            "],[1,"  "],[1,"  "],[0,"var error = "]],"start1":3452,"start2":3452,"length1":24,"length2":28},{"diffs":[[0,"ror = {\n"],[1,"    "],[0,"        "]],"start1":3474,"start2":3474,"length1":16,"length2":20},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"title: \""]],"start1":3533,"start2":3533,"length1":16,"length2":20},{"diffs":[[0,"twork\",\n"],[1,"    "],[0,"        "]],"start1":3571,"start2":3571,"length1":16,"length2":20},{"diffs":[[0,"        "],[-1,"};\n"],[1,"    };\n    "],[0,"        "]],"start1":3677,"start2":3677,"length1":19,"length2":27},{"diffs":[[0,"        "],[1,"    "],[0,"Tokbox.a"]],"start1":3736,"start2":3736,"length1":16,"length2":20},{"diffs":[[0,"        "],[1,"  "],[1,"  "],[0,"//alert_"]],"start1":3777,"start2":3777,"length1":16,"length2":20},{"diffs":[[0,"e.alert(error);\n"],[1,"    "],[0,"                "]],"start1":3815,"start2":3815,"length1":32,"length2":36},{"diffs":[[0,"l);\n            "],[-1,"}\n"],[1,"    }\n    "],[0,"        })\n     "]],"start1":3877,"start2":3877,"length1":34,"length2":42}]],"length":3943,"saved":false}
{"ts":1365548519009,"patch":[[{"diffs":[[0,"          })"],[1,";"],[0,"\n        }\n "]],"start1":3901,"start2":3901,"length1":24,"length2":25}]],"length":3944,"saved":false}
{"ts":1365548696048,"patch":[[{"diffs":[[0,"          data: "],[-1,"jso"],[1,"logi"],[0,"n_data,\n        "]],"start1":2826,"start2":2826,"length1":35,"length2":36}]],"length":3945,"saved":false}
{"ts":1365548710651,"patch":[[{"diffs":[[0,"                "],[-1,"alert"],[1,"Tokbox"],[0,"(\"Error getting "]],"start1":2995,"start2":2995,"length1":37,"length2":38}]],"length":3946,"saved":false}
{"ts":1365548713044,"patch":[[{"diffs":[[0,"  Tokbox"],[1,".alert"],[0,"(\"Error "]],"start1":3009,"start2":3009,"length1":16,"length2":22}]],"length":3952,"saved":false}
{"ts":1365548717153,"patch":[[{"diffs":[[0,"okbox.alert("],[1,"{}"],[0,"\"Error getti"]],"start1":3012,"start2":3012,"length1":24,"length2":26}]],"length":3954,"saved":false}
{"ts":1365548719658,"patch":[[{"diffs":[[0,".alert({"],[1,"error:"],[0,"}\"Error "]],"start1":3017,"start2":3017,"length1":16,"length2":22}]],"length":3960,"saved":false}
{"ts":1365548722584,"patch":[[{"diffs":[[0,"({error:"],[1,"\"true\""],[0,"}\"Error "]],"start1":3023,"start2":3023,"length1":16,"length2":22}]],"length":3966,"saved":false}
{"ts":1365548724828,"patch":[[{"diffs":[[0,"r:\"true\""],[1,",title"],[0,"}\"Error "]],"start1":3029,"start2":3029,"length1":16,"length2":22}]],"length":3972,"saved":false}
{"ts":1365548726496,"patch":[[{"diffs":[[0,"e\",title"],[1,":\"\""],[0,"}\"Error "]],"start1":3035,"start2":3035,"length1":16,"length2":19}]],"length":3975,"saved":false}
{"ts":1365548730675,"patch":[[{"diffs":[[0,",title:\""],[1,"Bad Login"],[0,"\"}\"Error"]],"start1":3037,"start2":3037,"length1":16,"length2":25}]],"length":3984,"saved":false}
{"ts":1365548734252,"patch":[[{"diffs":[[0,"d Login\""],[1,",message\"\""],[0,"}\"Error "]],"start1":3047,"start2":3047,"length1":16,"length2":26}]],"length":3994,"saved":false}
{"ts":1365548736530,"patch":[[{"diffs":[[0,",message"],[1,":"],[0,"\"\"}\"Erro"]],"start1":3055,"start2":3055,"length1":16,"length2":17}]],"length":3995,"saved":false}
{"ts":1365548762194,"patch":[[{"diffs":[[0,"essage:\""],[1,"E"],[0,"\"}\"Error"]],"start1":3057,"start2":3057,"length1":16,"length2":17}]],"length":3996,"saved":false}
{"ts":1365548766299,"patch":[[{"diffs":[[0,"essage:\""],[-1,"E"],[1,"Wrong Credentials"],[0,"\"}\"Error"]],"start1":3057,"start2":3057,"length1":17,"length2":33}]],"length":4012,"saved":false}
{"ts":1365548771286,"patch":[[{"diffs":[[0,"ls\"}"],[-1,"\"Error getting access token\""],[0,");\n "]],"start1":3080,"start2":3080,"length1":36,"length2":8}]],"length":3984,"saved":false}
{"ts":1365548776844,"patch":[[{"diffs":[[0,".alert({"],[1,"\n                            "],[0,"error:\"t"]],"start1":3017,"start2":3017,"length1":16,"length2":45}]],"length":4013,"saved":false}
{"ts":1365548777811,"patch":[[{"diffs":[[0,":\"true\","],[1,"\n                            "],[0,"title:\"B"]],"start1":3059,"start2":3059,"length1":16,"length2":45}]],"length":4042,"saved":false}
{"ts":1365548779161,"patch":[[{"diffs":[[0," Login\","],[1,"\n                            "],[0,"message:"]],"start1":3106,"start2":3106,"length1":16,"length2":45}]],"length":4071,"saved":false}
{"ts":1365548780851,"patch":[[{"diffs":[[0,"entials\""],[1,"\n                        "],[0,"});\n    "]],"start1":3162,"start2":3162,"length1":16,"length2":41}]],"length":4096,"saved":false}
{"ts":1365548806846,"patch":[[{"diffs":[[0," };\n"],[-1,"                    //Alert(error);\n"],[0,"    "]],"start1":3840,"start2":3840,"length1":44,"length2":8}]],"length":4060,"saved":false}
{"ts":1365548812066,"patch":[[{"diffs":[[0,"r);\n"],[-1,"                    //alert_html = App.template.alert(error);\n                    //$('#app').html(alert_html);\n"],[0,"    "]],"start1":3881,"start2":3881,"length1":120,"length2":8}]],"length":3948,"saved":false}
{"ts":1365548825036,"patch":[[{"diffs":[[0,"ta;\n"],[-1,"                        App.access_token = data.access_token;\n"],[0,"    "]],"start1":3312,"start2":3312,"length1":70,"length2":8}]],"length":3886,"saved":false}
{"ts":1365548829181,"patch":[[{"diffs":[[0,"            App."],[-1,"fil"],[1,"hu"],[0,"e_data = data.ro"]],"start1":3328,"start2":3328,"length1":35,"length2":34}]],"length":3885,"saved":false}
{"ts":1365548832021,"patch":[[{"diffs":[[0,"ata."],[-1,"root"],[1,"hue"],[0,"_dat"]],"start1":3356,"start2":3356,"length1":12,"length2":11}]],"length":3884,"saved":false}
{"ts":1365548840909,"patch":[[{"diffs":[[0,"a.hue_data;\n"],[1,"                        \n"],[0,"            "]],"start1":3358,"start2":3358,"length1":24,"length2":49}]],"length":3909,"saved":false}
{"ts":1365548842661,"patch":[[{"diffs":[[0,"                "],[1,"$.jst"],[0,"\n               "]],"start1":3378,"start2":3378,"length1":32,"length2":37}]],"length":3914,"saved":false}
{"ts":1365548845071,"patch":[[{"diffs":[[0,"   $.jst"],[1,"orage.s"],[0,"\n       "]],"start1":3391,"start2":3391,"length1":16,"length2":23}]],"length":3921,"saved":false}
{"ts":1365548846651,"patch":[[{"diffs":[[0,"torage.s"],[1,"et"],[0,"\n       "]],"start1":3398,"start2":3398,"length1":16,"length2":18}]],"length":3923,"saved":false}
{"ts":1365548848414,"patch":[[{"diffs":[[0,"rage.set"],[1,"(\"\")"],[0,"\n       "]],"start1":3400,"start2":3400,"length1":16,"length2":20}]],"length":3927,"saved":false}
{"ts":1365548852468,"patch":[[{"diffs":[[0,"ge.set(\""],[1,"user"],[0,"\")\n     "]],"start1":3402,"start2":3402,"length1":16,"length2":20}]],"length":3931,"saved":false}
{"ts":1365548854297,"patch":[[{"diffs":[[0,"t(\"user\""],[1,", "],[0,")\n      "]],"start1":3407,"start2":3407,"length1":16,"length2":18}]],"length":3933,"saved":false}
{"ts":1365548856068,"patch":[[{"diffs":[[0,"\"user\", "],[1,"data."],[0,")\n      "]],"start1":3409,"start2":3409,"length1":16,"length2":21}]],"length":3938,"saved":false}
{"ts":1365548858325,"patch":[[{"diffs":[[0,"\", data."],[-1,")"],[1,"user_data);"],[0,"\n       "]],"start1":3414,"start2":3414,"length1":17,"length2":27}]],"length":3948,"saved":false}
{"ts":1365548859466,"patch":[[{"diffs":[[0,"ata.user_data);\n"],[1,"                        \n"],[0,"                "]],"start1":3418,"start2":3418,"length1":32,"length2":57}]],"length":3973,"saved":false}
{"ts":1365548860635,"patch":[[{"diffs":[[0,"                "],[1,"$.js"],[0,"\n               "]],"start1":3442,"start2":3442,"length1":32,"length2":36}]],"length":3977,"saved":false}
{"ts":1365548862518,"patch":[[{"diffs":[[0,"    $.js"],[1,"torage.se"],[0,"\n       "]],"start1":3454,"start2":3454,"length1":16,"length2":25}]],"length":3986,"saved":false}
{"ts":1365548864160,"patch":[[{"diffs":[[0,"orage.se"],[1,"t(\"\")"],[0,"\n       "]],"start1":3463,"start2":3463,"length1":16,"length2":21}]],"length":3991,"saved":false}
{"ts":1365548865703,"patch":[[{"diffs":[[0,"ge.set(\""],[1,"hue_data"],[0,"\")\n     "]],"start1":3466,"start2":3466,"length1":16,"length2":24}]],"length":3999,"saved":false}
{"ts":1365548870011,"patch":[[{"diffs":[[0,"\"hue"],[-1,"_"],[1,"\", "],[0,"data"],[-1,"\""],[0,")\n  "]],"start1":3473,"start2":3473,"length1":14,"length2":15}]],"length":4000,"saved":false}
{"ts":1365548871746,"patch":[[{"diffs":[[0,"e\", data"],[-1,")"],[1,".hue_data);"],[0,"\n       "]],"start1":3476,"start2":3476,"length1":17,"length2":27}]],"length":4010,"saved":false}
{"ts":1365548889599,"patch":[[{"diffs":[[0," }\n        \n"],[1,"        \n"],[0,"    }\n\n});"]],"start1":3988,"start2":3988,"length1":22,"length2":31}]],"length":4019,"saved":false}
{"ts":1365548891526,"patch":[[{"diffs":[[0,"      }\n        "],[1,"else {\n            \n        }"],[0,"\n        \n    }\n"]],"start1":3983,"start2":3983,"length1":32,"length2":61}]],"length":4048,"saved":false}
{"ts":1365548900240,"patch":[[{"diffs":[[0,"e {\n            "],[1,"Tokbox.alert({\n                            error:\"true\",\n                            title:\"Bad Login\",\n                            message:\"Wrong Credentials\"\n                        });"],[0,"\n        }\n     "]],"start1":4002,"start2":4002,"length1":32,"length2":219}]],"length":4235,"saved":false}
{"ts":1365548910572,"patch":[[{"diffs":[[0,"            "],[-1,"            "],[0,"error:\"true\""]],"start1":4037,"start2":4037,"length1":36,"length2":24},{"diffs":[[0,"ror:\"true\",\n"],[-1,"            "],[0,"            "]],"start1":4051,"start2":4051,"length1":36,"length2":24},{"diffs":[[0,"            "],[-1,"            "],[0,"message:\"Wro"]],"start1":4102,"start2":4102,"length1":36,"length2":24},{"diffs":[[0,"redentials\"\n"],[-1,"            "],[0,"            "]],"start1":4130,"start2":4130,"length1":36,"length2":24}]],"length":4187,"saved":false}
{"ts":1365548925483,"patch":[[{"diffs":[[0,"     title:\""],[-1,"Bad Login"],[1,"Missing Info"],[0,"\",\n         "]],"start1":4074,"start2":4074,"length1":33,"length2":36}]],"length":4190,"saved":false}
{"ts":1365548936725,"patch":[[{"diffs":[[0,"essage:\""],[-1,"Wrong Credentials"],[1,"You left one of the fields blank"],[0,"\"\n      "]],"start1":4118,"start2":4118,"length1":33,"length2":48}]],"length":4205,"saved":false}
{"ts":1365548937854,"patch":[[{"diffs":[[0,"ds blank"],[1,"."],[0,"\"\n      "]],"start1":4150,"start2":4150,"length1":16,"length2":17}]],"length":4206,"saved":false}
{"ts":1365548951337,"patch":[[{"diffs":[[0,"sword});"],[-1,"\n"],[0,"        "]],"start1":2693,"start2":2693,"length1":17,"length2":16}]],"length":4205,"saved":false}
{"contributors":[],"silentsave":true,"ts":1365657878976,"patch":[[{"diffs":[[0,"l).html("],[-1,"templa"],[1,"App."],[0,"te);\n   "]],"start1":457,"start2":457,"length1":22,"length2":20}]],"length":4203,"saved":false}
{"ts":1365657881094,"patch":[[{"diffs":[[0,"l(App.te"],[1,"mplate.pu"],[0,");\n     "]],"start1":463,"start2":463,"length1":16,"length2":25}]],"length":4212,"saved":false}
{"ts":1365657896796,"patch":[[{"diffs":[[0,"plate.pu"],[1,"blic"],[0,");\n     "]],"start1":472,"start2":472,"length1":16,"length2":20}]],"length":4216,"saved":false}
{"ts":1365657903056,"patch":[[{"diffs":[[0,");\n\n"],[-1,"        var source   = $(\"#publicView-template\").html();\n        var template = Handlebars.compile(source);"],[0,"\n   "]],"start1":329,"start2":329,"length1":115,"length2":8}]],"length":4109,"saved":false}
{"ts":1365657904264,"patch":[[{"diffs":[[0,"gin\");\n\n"],[-1,"\n"],[0,"        "]],"start1":325,"start2":325,"length1":17,"length2":16}]],"length":4108,"saved":false}
{"ts":1365660417024,"patch":[[{"diffs":[[0,"        "],[-1,"$("],[0,"this."],[-1,"el)"],[0,".html(Ap"]],"start1":333,"start2":333,"length1":26,"length2":21}]],"length":4103,"saved":false}
{"ts":1365660418999,"patch":[[{"diffs":[[0,"   this."],[1,"$"],[0,".html(Ap"]],"start1":338,"start2":338,"length1":16,"length2":17}]],"length":4104,"saved":false}
{"ts":1365660420308,"patch":[[{"diffs":[[0,"  this.$"],[1,"el"],[0,".html(Ap"]],"start1":339,"start2":339,"length1":16,"length2":18}]],"length":4106,"saved":false}
{"ts":1365725556149,"patch":[[{"diffs":[[0,"ublic);\n        "],[1,"//"],[0,"$('#app').html(t"]],"start1":369,"start2":369,"length1":32,"length2":34}]],"length":4108,"saved":false}
{"contributors":[],"silentsave":true,"ts":1365730776386,"patch":[[{"diffs":[[0,"a.hue_data;\n"],[1,"                        if (App)\n                        \n                        \n"],[0,"            "]],"start1":3260,"start2":3260,"length1":24,"length2":107}]],"length":4191,"saved":false}
{"ts":1365730777993,"patch":[[{"diffs":[[0," if (App"],[1,".user.a"],[0,")\n      "]],"start1":3295,"start2":3295,"length1":16,"length2":23}]],"length":4198,"saved":false}
{"ts":1365730779684,"patch":[[{"diffs":[[0,"p.user.a"],[1,"dmin"],[0,")\n      "]],"start1":3302,"start2":3302,"length1":16,"length2":20}]],"length":4202,"saved":false}
{"ts":1365730780964,"patch":[[{"diffs":[[0,"r.admin)"],[1," {\n                            \n                        }"],[0,"\n       "]],"start1":3307,"start2":3307,"length1":16,"length2":73}]],"length":4259,"saved":false}
{"ts":1365730787462,"patch":[[{"diffs":[[0,"                "],[1,"//the user is an admin, get Admin data"],[0,"\n               "]],"start1":3330,"start2":3330,"length1":32,"length2":70}]],"length":4297,"saved":false}
{"ts":1365730794755,"patch":[[{"diffs":[[0,"  \n    }"],[1,",\n    \n    "],[0,"\n\n});"]],"start1":4284,"start2":4284,"length1":13,"length2":24}]],"length":4308,"saved":false}
{"ts":1365730800926,"patch":[[{"diffs":[[0,"   \n    "],[1,"admin_data: "],[0,"\n\n});"]],"start1":4295,"start2":4295,"length1":13,"length2":25}]],"length":4320,"saved":false}
{"ts":1365730802660,"patch":[[{"diffs":[[0,"n_data: "],[1,"function()"],[0,"\n\n});"]],"start1":4307,"start2":4307,"length1":13,"length2":23}]],"length":4330,"saved":false}
{"ts":1365730806849,"patch":[[{"diffs":[[0,"nction()"],[1," {"],[0,"\n\n});"]],"start1":4317,"start2":4317,"length1":13,"length2":15}]],"length":4332,"saved":false}
{"ts":1365730807844,"patch":[[{"diffs":[[0,"tion() {"],[1,"\n        \n    }"],[0,"\n\n});"]],"start1":4319,"start2":4319,"length1":13,"length2":28}]],"length":4347,"saved":false}
{"ts":1365730826403,"patch":[[{"diffs":[[0,") {\n        "],[1,"$.ajax({\n                type: 'POST',\n                url: 'http://localhost:8080/users/login',\n                data: login_data,\n                dataType: 'json',\n                statusCode: {\n                    400 : function(jqXHR, textStatus, errorThrown) {\n                        Tokbox.alert({\n                            error:\"true\",\n                            title:\"Bad Login\",\n                            message:\"Wrong Credentials\"\n                        });\n                    },\n                    200 : function(data) {\n                        App.user = data.user_data;\n                        App.hue_data = data.hue_data;\n                        if (App.user.admin) {\n                            //the user is an admin, get Admin data\n                        }\n                        \n                        \n                        $.jstorage.set(\"user\", data.user_data);\n                        $.jstorage.set(\"hue\", data.hue_data);\n                        App.router.navigate(\"home\", true);\n                    }\n                },\n                error: function(jqXHR, textStatus, errorThrown) {\n                    var error = {\n                        error: \"true\",\n                        title: \"Error Accessing Network\",\n                        message: \"Whoops, something went wrong. Don't worry we're on it!\"\n                    };\n                    Tokbox.alert(error);\n                }\n            });"],[0,"\n    }\n\n});"]],"start1":4324,"start2":4324,"length1":23,"length2":1469}]],"length":5793,"saved":false}
{"ts":1365730832603,"patch":[[{"diffs":[[0,"x({\n            "],[-1,"    "],[0,"type: 'POST',\n  "]],"start1":4341,"start2":4341,"length1":36,"length2":32},{"diffs":[[0,"  type: 'POST',\n"],[-1,"    "],[0,"            url:"]],"start1":4355,"start2":4355,"length1":36,"length2":32},{"diffs":[[0,"n',\n            "],[-1," "],[-1,"   "],[0,"data: login_data"]],"start1":4421,"start2":4421,"length1":36,"length2":32},{"diffs":[[0,"ta: login_data,\n"],[-1,"    "],[0,"            data"]],"start1":4439,"start2":4439,"length1":36,"length2":32},{"diffs":[[0,"n',\n            "],[-1," "],[-1,"   "],[0,"statusCode: {\n  "]],"start1":4481,"start2":4481,"length1":36,"length2":32},{"diffs":[[0,"  statusCode: {\n"],[-1,"    "],[0,"                "]],"start1":4495,"start2":4495,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"Tokbox.alert({\n "]],"start1":4580,"start2":4580,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"error:\"true\",\n  "]],"start1":4619,"start2":4619,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"  "],[-1,"  "],[0,"title:\"Bad Login"]],"start1":4657,"start2":4657,"length1":36,"length2":32},{"diffs":[[0,"le:\"Bad Login\",\n"],[-1,"    "],[0,"                "]],"start1":4676,"start2":4676,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"});\n            "]],"start1":4748,"start2":4748,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"    },\n   "],[1,"},\n"],[0,"            "]],"start1":4772,"start2":4772,"length1":34,"length2":27},{"diffs":[[0,"                "],[-1," "],[0,"200 : function(d"]],"start1":4787,"start2":4787,"length1":33,"length2":32},{"diffs":[[0,"unction(data) {\n"],[-1,"    "],[0,"                "]],"start1":4810,"start2":4810,"length1":36,"length2":32},{"diffs":[[0,"data.user_data;\n"],[-1,"    "],[0,"                "]],"start1":4857,"start2":4857,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"if (App.user.adm"]],"start1":4927,"start2":4927,"length1":36,"length2":32},{"diffs":[[0,"p.user.admin) {\n"],[-1,"    "],[0,"                "]],"start1":4949,"start2":4949,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"}\n              "]],"start1":5032,"start2":5032,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    \n "],[1,"\n"],[0,"                "]],"start1":5054,"start2":5054,"length1":38,"length2":33},{"diffs":[[0,"            "],[-1,"   \n    "],[1,"\n"],[0,"            "]],"start1":5079,"start2":5079,"length1":32,"length2":25},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"$.jstorage.set(\""]],"start1":5156,"start2":5156,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"App.router.navig"]],"start1":5214,"start2":5214,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[-1,"  }\n    "],[1,"}\n"],[0,"            "]],"start1":5269,"start2":5269,"length1":34,"length2":26},{"diffs":[[0," },\n            "],[-1,"  "],[-1,"  "],[0,"error: function("]],"start1":5294,"start2":5294,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"var error = {\n  "]],"start1":5360,"start2":5360,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"   "],[-1," "],[0,"error: \"true\",\n "]],"start1":5394,"start2":5394,"length1":36,"length2":32},{"diffs":[[0," error: \"true\",\n"],[-1,"    "],[0,"                "]],"start1":5409,"start2":5409,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"   "],[-1," "],[0,"message: \"Whoops"]],"start1":5483,"start2":5483,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"    };\n    "],[1,"};\n"],[0,"            "]],"start1":5569,"start2":5569,"length1":35,"length2":27},{"diffs":[[0,"            "],[-1,"    }\n    "],[1,"}\n"],[0,"        });\n"]],"start1":5621,"start2":5621,"length1":34,"length2":26}]],"length":5657,"saved":false}
{"ts":1365730836899,"patch":[[{"diffs":[[0,"         type: '"],[-1,"POS"],[1,"GE"],[0,"T',\n            "]],"start1":4348,"start2":4348,"length1":35,"length2":34}]],"length":5656,"saved":false}
{"ts":1365730840208,"patch":[[{"diffs":[[0,"host:8080/users/"],[-1,"login"],[1,"admin_data"],[0,"',\n            d"]],"start1":4400,"start2":4400,"length1":37,"length2":42}]],"length":5661,"saved":false}
{"ts":1365730844844,"patch":[[{"diffs":[[0,"a',\n"],[-1,"            data: login_data,\n"],[0,"    "]],"start1":4425,"start2":4425,"length1":38,"length2":8}]],"length":5631,"saved":false}
{"ts":1365730859200,"patch":[[{"diffs":[[0,"            App."],[-1,"user"],[1,"admin_data"],[0," = data.user_dat"]],"start1":4808,"start2":4808,"length1":36,"length2":42}]],"length":5637,"saved":false}
{"ts":1365730863335,"patch":[[{"diffs":[[0,"min_data = data."],[-1,"user"],[1,"admin"],[0,"_data;\n         "]],"start1":4826,"start2":4826,"length1":36,"length2":37}]],"length":5638,"saved":false}
{"ts":1365730869952,"patch":[[{"diffs":[[0,"a = "],[-1,"data.admin_"],[0,"data"]],"start1":4833,"start2":4833,"length1":19,"length2":8}]],"length":5627,"saved":false}
{"ts":1365730875248,"patch":[[{"diffs":[[0,"ta;\n"],[-1,"                    App.hue_data = data.hue_data;\n                    if (App.user.admin) {\n                        //the user is an admin, get Admin data\n                    }\n                    \n                    \n                    $.jstorage.set(\"user\", data.user_data);"],[0,"\n   "]],"start1":4839,"start2":4839,"length1":286,"length2":8}]],"length":5349,"saved":false}
{"ts":1365730876281,"patch":[[{"diffs":[[0,"= data;\n"],[-1,"\n"],[0,"        "]],"start1":4835,"start2":4835,"length1":17,"length2":16}]],"length":5348,"saved":false}
{"ts":1365730878410,"patch":[[{"diffs":[[0,"$.jstorage.set(\""],[-1,"hue"],[1,"admin"],[0,"\", data.hue_data"]],"start1":4863,"start2":4863,"length1":35,"length2":37}]],"length":5350,"saved":false}
{"ts":1365730886316,"patch":[[{"diffs":[[0,"admin\", "],[-1,"data.hue_"],[0,"data);\n "]],"start1":4879,"start2":4879,"length1":25,"length2":16}]],"length":5341,"saved":false}
{"ts":1365730891734,"patch":[[{"diffs":[[0,"a);\n"],[-1,"                    App.router.navigate(\"home\", true);\n"],[0,"    "]],"start1":4890,"start2":4890,"length1":63,"length2":8}]],"length":5286,"saved":false}
{"ts":1365730911996,"patch":[[{"diffs":[[0,"essage:\""],[-1,"Wrong Credentials"],[1,"User isn't admin"],[0,"\"\n      "]],"start1":4691,"start2":4691,"length1":33,"length2":32}]],"length":5285,"saved":false}
{"ts":1365730917563,"patch":[[{"diffs":[[0," Admin data\n"],[1,"                            \n"],[0,"            "]],"start1":3373,"start2":3373,"length1":24,"length2":53}]],"length":5314,"saved":false}
{"ts":1365730918787,"patch":[[{"diffs":[[0,"                "],[1,"ad"],[0,"\n               "]],"start1":3397,"start2":3397,"length1":32,"length2":34}]],"length":5316,"saved":false}
{"ts":1365730919891,"patch":[[{"diffs":[[0,"      ad"],[1,"min"],[0,"\n       "]],"start1":3407,"start2":3407,"length1":16,"length2":19}]],"length":5319,"saved":false}
{"ts":1365730920825,"patch":[[{"diffs":[[0,"   admin"],[1,"_data"],[0,"\n       "]],"start1":3410,"start2":3410,"length1":16,"length2":21}]],"length":5324,"saved":false}
{"ts":1365730922614,"patch":[[{"diffs":[[0,"  admin_data"],[1,"();"],[0,"\n           "]],"start1":3411,"start2":3411,"length1":24,"length2":27}]],"length":5327,"saved":false}
{"ts":1365730940919,"patch":[[{"diffs":[[0," \"login\""],[1,","],[0,");\n\n    "]],"start1":321,"start2":321,"length1":16,"length2":17}]],"length":5328,"saved":false}
{"ts":1365730943969,"patch":[[{"diffs":[[0,"\"login\","],[1," \"admin_data\""],[0,");\n\n    "]],"start1":322,"start2":322,"length1":16,"length2":29}]],"length":5341,"saved":false}
{"ts":1365730954671,"patch":[[{"diffs":[[0,"    "],[-1,"admin_data();"],[1,"this.ad"],[0,"\n   "]],"start1":3423,"start2":3423,"length1":21,"length2":15}]],"length":5335,"saved":false}
{"ts":1365730956876,"patch":[[{"diffs":[[0," this.ad"],[1,"min_data"],[0,"\n       "]],"start1":3426,"start2":3426,"length1":16,"length2":24}]],"length":5343,"saved":false}
{"ts":1365730961346,"patch":[[{"diffs":[[0,"is.admin"],[-1,"_data"],[0,"\n       "]],"start1":3429,"start2":3429,"length1":21,"length2":16}]],"length":5338,"saved":false}
{"ts":1365730965063,"patch":[[{"diffs":[[0,"is.admin"],[1,"_data"],[0,"\n       "]],"start1":3429,"start2":3429,"length1":16,"length2":21}]],"length":5343,"saved":false}
{"ts":1365730966496,"patch":[[{"diffs":[[0,"s.admin_data"],[1,"();"],[0,"\n           "]],"start1":3430,"start2":3430,"length1":24,"length2":27}]],"length":5346,"saved":false}
